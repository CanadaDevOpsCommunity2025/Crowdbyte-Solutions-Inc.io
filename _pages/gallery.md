---
layout: single
permalink: /gallery/
title: ""
classes: "full-bleed"
sidebar: false

# ——— Settings you can tweak ———
albums_root: "/assets/img/gallery/"
videos_album_name: "Videos"
youtube_ids:
  - nGn7-rb_dU8
  - qjpCqLSxo4A
  - 6aC_nes9LIk
  - RMwWvp7wRkY
---

<style>
/* Full-bleed container reset */
.page.full-bleed .page__inner-wrap,
.page.full-bleed .page__content { max-width: none !important; padding: 0 !important; }

/* Hide theme title to avoid duplicate H1 */
.page__title { display:none !important; }

/* ===== Blue header (hero) ===== */
.g-hero {
  width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw);
  background: linear-gradient(135deg,#2f5597 0%,#2874c7 50%,#7fb0f0 100%);
  color:#fff; text-align:center; padding: 34px 16px 24px;
}
.g-hero h1 { margin:0; font-weight:900; font-size: clamp(24px,3.6vw,40px); }

/* ===== Centered content wrapper ===== */
.albums-stage{
  display:flex; align-items:flex-start; justify-content:center;
  padding: 24px clamp(12px,3vw,36px) 40px;
}

/* Albums grid (BIGGER + MORE READABLE TITLES) */
.albums-grid{
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  display:grid; gap:20px;
  grid-template-columns: repeat(1, minmax(320px, 1fr));
}
@media (min-width: 800px){
  .albums-grid{ grid-template-columns: repeat(2, minmax(380px, 1fr)); }
}
@media (min-width: 1200px){
  .albums-grid{ grid-template-columns: repeat(3, minmax(420px, 1fr)); }
}

.album-card{
  position:relative; overflow:hidden; border-radius:16px;
  background:#fff; border:1px solid rgba(0,0,0,.06);
  box-shadow: 0 12px 36px rgba(2,24,71,.07);
  cursor:pointer;
}
.album-cover{
  width:100%; aspect-ratio: 16/10; object-fit:cover; display:block;
  transition: transform .25s ease;
}
.album-card:hover .album-cover{ transform: scale(1.03); }

.album-meta{
  position:absolute; left:10px; bottom:10px; right:10px;
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  background: linear-gradient(180deg, rgba(0,0,0,0) 0%,
                                      rgba(6,18,38,.50) 50%,
                                      rgba(6,18,38,.80) 100%);
  color:#eaf1ff; border-radius:12px; padding:12px 14px;
  backdrop-filter: blur(2px);
}
.album-name{
  font-weight:900; letter-spacing:.2px;
  font-size: clamp(16px, 2.2vw, 24px);
  line-height: 1.15;
  white-space: normal; /* allow wrap */
  text-shadow: 0 2px 10px rgba(0,0,0,.4);
}
.album-count{
  font-weight:800; opacity:.9;
  font-size: clamp(12px, 1.4vw, 14px);
}

/* Viewer (modal with horizontal scroll) */
#viewer{
  position:fixed; inset:0; z-index:9999; display:none;
  background: rgba(6,12,24,.6); backdrop-filter: blur(6px);
}
#viewer[aria-hidden="false"]{ display:block; }
.viewer-inner{
  position:absolute; inset:0; display:flex; flex-direction:column; gap:10px;
  padding: clamp(10px,3vw,22px);
}
.viewer-bar{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  color:#eaf1ff;
}
.viewer-title{ font-weight:900; font-size:clamp(16px,1.8vw,20px); }
.viewer-close{
  background: rgba(255,255,255,.08); color:#fff; border:1px solid rgba(255,255,255,.35);
  border-radius:999px; width:40px; height:40px; display:grid; place-items:center; cursor:pointer;
}
.viewer-close:hover{ background: rgba(255,255,255,.16); }

/* Horizontal strip */
.viewer-strip{
  position:relative; flex:1 1 auto; overflow-x:auto; overflow-y:hidden;
  scroll-snap-type: x mandatory; display:flex; gap:12px; padding: 8px 0;
}
.viewer-item{
  flex: 0 0 auto; scroll-snap-align: center;
  display:grid; place-items:center;
  background:#000; border-radius:14px; overflow:hidden;
  border:1px solid rgba(255,255,255,.15);
  width: min(92vw, 1200px);
  aspect-ratio: 16/9;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}
.viewer-item img, .viewer-item iframe{
  width:100%; height:100%; object-fit:contain; display:block; border:0;
  background:#000;
}

/* Prev/Next buttons */
.viewer-nav{
  position:absolute; inset:0; pointer-events:none;
}
.nav-btn{
  position:absolute; top:50%; transform: translateY(-50%);
  pointer-events:auto; cursor:pointer; user-select:none;
  width:44px; height:44px; border-radius:999px;
  background: rgba(255,255,255,.08); color:#fff;
  border:1px solid rgba(255,255,255,.35); display:grid; place-items:center;
}
.nav-btn:hover{ background: rgba(255,255,255,.16); }
.nav-prev{ left: 8px; }
.nav-next{ right: 8px; }

/* Hide MM pager here */
.pagination, .pagination--pager { display:none !important; }
</style>

<!-- ===== BLUE HEADER ===== -->
<section class="g-hero" aria-labelledby="gallery-heading">
  <h1 id="gallery-heading">Gallery</h1>
</section>

<!-- ===== CENTERED ALBUMS ===== -->
<section class="albums-stage" aria-label="Gallery albums">
  <div id="albumsGrid" class="albums-grid"></div>
</section>

<!-- Hidden pool of media items generated by Liquid (images + videos) -->
<div id="mediaPool" style="display:none">
  {% comment %}
    Gather all image files under the albums_root. Album is the first
    subfolder after albums_root. If an image is directly in albums_root,
    it goes into album "Photos".
  {% endcomment %}
  {% assign root = page.albums_root | default: "/assets/img/gallery/" %}
  {% assign all = site.static_files | where_exp: "f", "f.path contains root" %}
  {% assign img_exts = ".png,.svg,.jpg,.jpeg,.webp,.gif,.PNG,.SVG,.JPG,.JPEG,.WEBP,.GIF" %}
  {% for f in all %}
    {% if img_exts contains f.extname %}
      {% assign rel = f.path | remove: root %}
      {% assign album = rel | split:'/' | first %}
      {% if album == rel %}{% assign album = "Photos" %}{% endif %}
      <!-- IMPORTANT: preserve folder name EXACTLY and URL-ENCODE the href -->
      <a class="media"
         data-type="image"
         data-album="{{ album }}"
         href="{{ f.path | relative_url | uri_escape }}"></a>
    {% endif %}
  {% endfor %}

  {% comment %}
    Add Videos album from page.youtube_ids
  {% endcomment %}
  {% if page.youtube_ids and page.youtube_ids.size > 0 %}
    {% assign vname = page.videos_album_name | default: "Videos" %}
    {% for vid in page.youtube_ids %}
      <a class="media" data-type="video" data-album="{{ vname }}" href="https://www.youtube-nocookie.com/embed/{{ vid }}"></a>
    {% endfor %}
  {% endif %}
</div>

<!-- Viewer Modal -->
<div id="viewer" aria-hidden="true" aria-label="Album viewer">
  <div class="viewer-inner">
    <div class="viewer-bar">
      <div class="viewer-title" id="viewerTitle">Album</div>
      <button type="button" class="viewer-close" id="viewerClose" aria-label="Close">✕</button>
    </div>

    <div class="viewer-strip" id="viewerStrip" tabindex="0" aria-label="Scroll left or right to browse">
      <!-- JS injects media items here -->
      <div class="viewer-nav">
        <button class="nav-btn nav-prev" id="navPrev" aria-label="Previous">‹</button>
        <button class="nav-btn nav-next" id="navNext" aria-label="Next">›</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const pool = document.getElementById('mediaPool');
  const albumsGrid = document.getElementById('albumsGrid');

  const medias = Array.from(pool.querySelectorAll('.media')).map(a => ({
    type: a.dataset.type,
    album: a.dataset.album,   // exact folder name preserved (incl. spaces)
    href: a.getAttribute('href') // already URL-encoded by Liquid
  }));

  // Group by album
  const byAlbum = {};
  for(const m of medias){
    if(!byAlbum[m.album]) byAlbum[m.album] = [];
    byAlbum[m.album].push(m);
  }

  // Optional display-name mapping (folder name -> label)
  const albumLabel = {
    "DevOps for Gen AI Ottawa": "DevOps for Gen AI — Ottawa"
  };
  const getDisplayName = (folderName) => albumLabel[folderName] || folderName;

  // Create album cards
  Object.keys(byAlbum).sort().forEach(albumName => {
    const items = byAlbum[albumName];
    const first = items[0];

    // Cover: for images use the image; for videos use YouTube thumbnail (fallback)
    let coverSrc = '';
    if(first.type === 'image') {
      coverSrc = first.href; // encoded
    } else {
      const imgInAlbum = items.find(i => i.type === 'image');
      if(imgInAlbum) coverSrc = imgInAlbum.href;
      else {
        const id = (first.href.split('/embed/')[1] || '').split(/[?&]/)[0];
        coverSrc = id ? `https://img.youtube.com/vi/${id}/hqdefault.jpg` : '';
      }
    }

    const displayName = getDisplayName(albumName);
    const count = items.length;

    const card = document.createElement('article');
    card.className = 'album-card';
    card.setAttribute('data-album', albumName);
    card.innerHTML = `
      <img class="album-cover" src="${coverSrc}" alt="${displayName}">
      <div class="album-meta">
        <span class="album-name">${displayName}</span>
        <span class="album-count">${count}</span>
      </div>
    `;
    card.addEventListener('click', () => openViewer(albumName));
    albumsGrid.appendChild(card);
  });

  // Viewer behavior
  const viewer = document.getElementById('viewer');
  const viewerTitle = document.getElementById('viewerTitle');
  const viewerStrip = document.getElementById('viewerStrip');
  const btnClose = document.getElementById('viewerClose');

  let currentAlbum = '';
  let currentIndex = 0;

  function buildItemEl(item){
    const wrap = document.createElement('div');
    wrap.className = 'viewer-item';
    if(item.type === 'image'){
      const img = document.createElement('img');
      img.src = item.href; // encoded
      img.alt = '';
      wrap.appendChild(img);
    }else{
      const iframe = document.createElement('iframe');
      iframe.src = item.href;
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
      iframe.referrerPolicy = "strict-origin-when-cross-origin";
      iframe.allowFullscreen = true;
      wrap.appendChild(iframe);
    }
    return wrap;
  }

  function openViewer(albumName){
    currentAlbum = albumName;
    currentIndex = 0;
    viewerTitle.textContent = getDisplayName(albumName);

    // Rebuild strip contents
    viewerStrip.innerHTML = `
      <div class="viewer-nav">
        <button class="nav-btn nav-prev" id="navPrev" aria-label="Previous">‹</button>
        <button class="nav-btn nav-next" id="navNext" aria-label="Next">›</button>
      </div>
    `;
    const items = byAlbum[albumName] || [];
    const nav = viewerStrip.querySelector('.viewer-nav');
    items.forEach(item => viewerStrip.insertBefore(buildItemEl(item), nav));

    // Wire up nav after rebuild
    viewerStrip.querySelector('#navPrev').addEventListener('click', prev);
    viewerStrip.querySelector('#navNext').addEventListener('click', next);

    viewer.setAttribute('aria-hidden','false');
    document.documentElement.style.overflow = 'hidden';
    setTimeout(()=> viewerStrip.focus(), 0);
  }

  function closeViewer(){
    viewer.setAttribute('aria-hidden','true');
    document.documentElement.style.overflow = '';
    // Stop any playing videos by resetting iframes
    viewerStrip.querySelectorAll('iframe').forEach(f => { f.src = f.src; });
  }

  function next(){
    const items = Array.from(viewerStrip.querySelectorAll('.viewer-item'));
    if(!items.length) return;
    currentIndex = (currentIndex + 1) % items.length;
    items[currentIndex].scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
  }
  function prev(){
    const items = Array.from(viewerStrip.querySelectorAll('.viewer-item'));
    if(!items.length) return;
    currentIndex = (currentIndex - 1 + items.length) % items.length;
    items[currentIndex].scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
  }

  // Close + outside click close
  btnClose.addEventListener('click', closeViewer);
  viewer.addEventListener('click', (e) => { if(e.target === viewer) closeViewer(); });

  // Keyboard (when viewer open)
  document.addEventListener('keydown', (e)=>{
    if(viewer.getAttribute('aria-hidden') === 'true') return;
    if(e.key === 'Escape') closeViewer();
    else if(e.key === 'ArrowRight') next();
    else if(e.key === 'ArrowLeft') prev();
  });
})();
</script>
